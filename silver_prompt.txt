You are running a Silver Cycle for the AI Employee Vault at D:\Hackathon_0\AI_Employee_Vault.

Execute the following seven Agent Skills in order. Each skill has full instructions in its SKILL.md file. Read each skill file before executing its step.

---

SKILL 1 — /multi-watcher-orchestration
Scan ALL input sources for new items:
- inbox/ (local files)
- Gmail (gmail_watcher.py, if gmail_token.json exists)
- LinkedIn notifications (linkedin_watcher.py, if .linkedin_session/ exists)
- WhatsApp (whatsapp_watcher.py, if .whatsapp_session/ exists)
Normalise every new item into needs_action/ with .meta.json sidecar (status: pending).
Deduplicate against done/. Report item counts per source.
Skill file: .claude/skills/multi-watcher-orchestration/SKILL.md

---

SKILL 1.5 — /route-cross-domain-task
For EVERY file in needs_action/ with status "pending":
- Read task content and .meta.json sidecar
- Classify domain: personal | business | both (keyword signal matching)
- Apply cross-domain rules CD-1 → CD-6 in order (first match wins):
    CD-1  WhatsApp + payment keyword + monetary pattern → Odoo invoice check + bank balance check → human-approval-workflow IMMEDIATELY
    CD-2  WhatsApp + personal signal + monetary pattern → dual plan + human-approval-workflow
    CD-3  LinkedIn message → contact lookup (known client = business, unknown = personal)
    CD-4  Gmail + invoice/contract/PO → Odoo cross-check step added to plan → human-approval-workflow
    CD-5  Domain = both → split into Plan_PERSONAL_<slug>.md + Plan_BUSINESS_<slug>.md, each routes independently
    CD-6  Urgent keywords + business/both domain → priority: high + human-approval-workflow regardless of sensitivity
- Generate domain-aware Plan file(s) in plans/ (two files if CD-5 applies)
- Update .meta.json: set status "processing", add domain, domain_signals, cross_domain_rule, priority, sensitive, route
- Log each routing decision via log-action
- NEVER initiate a payment — CD-1 always routes to human-approval-workflow first
Skill file: .claude/skills/route-cross-domain-task/SKILL.md

---

SKILL 2 — /plan-creation-workflow
Fallback planner: handles any file in needs_action/ still at status "pending" after Skill 1.5
(Skill 1.5 processes all pending tasks — Skill 2 catches edge cases only):
- Analyse content (category, key phrases, sensitivity check)
- Generate a detailed Plan_XXX.md in plans/ with numbered checkboxes specific to the category
- Update .meta.json status to "processing" and set "plan" and "sensitive" fields
- Append entry to logs/summary.md
- Route sensitive tasks to Skill 3; non-sensitive tasks continue to Skill 4 or complete directly
Skill file: .claude/skills/plan-creation-workflow/SKILL.md

---

SKILL 3 — /human-approval-workflow
Phase A — For every task flagged sensitive by Skill 2:
  Create APPROVAL_<action>_<timestamp>.md in Pending_Approval/ using the exact template in the skill file.
  Update dashboard and logs. STOP — do not execute.
Phase B — Scan Approved/ and Rejected/ for any waiting decision files:
  Approved → call Skill 4 to execute. Then archive to done/ and update dashboard.
  Rejected → log rejection, archive to done/ (rejected), update dashboard. Do NOT retry.
Skill file: .claude/skills/human-approval-workflow/SKILL.md

---

SKILL 4 — /mcp-action-handler
Execute ONLY approved actions (files found in Approved/ during Skill 3 Phase B).
Select the correct MCP server by action type:
  send_email    → email-mcp (email-mcp/index.js, gmail_token.json)
  post_linkedin → Playwright (.claude/skills/linkedin-poster/linkedin_poster.py → post_to_linkedin())
  browser_action → Playwright (ad-hoc)
Log result to system_logs.md. Archive approval to done/. Move source task to done/.
On failure: move back to Pending_Approval/ with error note — do NOT retry automatically.
Skill file: .claude/skills/mcp-action-handler/SKILL.md

---

SKILL 5 — /linkedin-business-poster
Triggered if ANY of these are true:
  a) A task in needs_action/ has category "linkedin-post"
  b) No LinkedIn post has been made in the last 7 days (check dashboard.md)
If triggered:
  Read Business_Goals.md fully. Read 3 most recent plans/Plan_*.md files.
  Choose a post angle (progress update / lesson learned / feature reveal / behind the scenes).
  Draft a post (800–1300 chars, no markdown bold, real project details, genuine CTA).
  Verify quality checklist in skill file.
  Route to Skill 3 (human-approval-workflow) — NEVER post directly.
  Update dashboard status to "pending approval".
Skill file: .claude/skills/linkedin-business-poster/SKILL.md

---

SKILL 6 — /dashboard-updater
Final step — refresh dashboard.md and system_logs.md to reflect the full cycle:
  Update Watcher Status table with scan results from Skill 1
  Ensure Pending Tasks table is accurate (pending items only)
  Ensure Pending Approvals table is accurate (remove executed/rejected)
  Ensure Active Plans table has all new plans from Skill 2
  Update Recent LinkedIn Posts if Skill 5 ran
  Add all newly completed tasks to Completed Tasks table
  Append Silver Cycle Summary block to system_logs.md with counts and timestamp
Skill file: .claude/skills/dashboard-updater/SKILL.md

---

---

PRE-FLIGHT — /watchdog (optional health check)
Before Skill 1, read watchdog_status.json (if it exists).
- If absent OR last checked_at > 5 minutes ago: create ALERT_watchdog_down_<timestamp>.md in Pending_Approval/ and log via log-action.
- If any process shows alive: false: log the dead process and note it in system_logs.md.
- Do NOT halt the cycle — continue to Skill 1 regardless.
Skill file: .claude/skills/watchdog/SKILL.md

---

RULES (highest priority — override everything else):
1. company_handbook.md rules are absolute — read it before any action
2. NEVER execute a sensitive action without an approval file in Approved/
3. NEVER move approval files yourself — only humans move files to Approved/ or Rejected/
4. NEVER skip dashboard-updater — every cycle must end with an updated dashboard
5. If needs_action/ is empty after Skill 1, skip Skills 1.5 and 2; still run Skills 3, 5 (check approvals + LinkedIn), and 6

ERROR HANDLING RULES (mandatory — applies to every skill above):
6. On ANY network/API/timeout error: invoke handle-transient-error FIRST (5 retries, exponential backoff).
   Skill file: .claude/skills/handle-transient-error/SKILL.md
7. If all retries fail on a non-critical task: invoke queue-for-later (RETRY_ file, 1-hour cooldown).
   Skill file: .claude/skills/queue-for-later/SKILL.md
8. If all retries fail on a critical action OR retry_count >= 3: invoke graceful-degrade
   (→ deferred_queue.json + ALERT in Pending_Approval/). NEVER halt the cycle.
   Skill file: .claude/skills/graceful-degrade/SKILL.md
9. NEVER swallow exceptions silently. Every error → log-action entry + escalation skill.

When all seven skills are complete, output: SILVER CYCLE COMPLETE
